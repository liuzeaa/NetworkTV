<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title><%= title %></title>
    <link rel="stylesheet" href="/stylesheets/bootstrap.min.css">
    <link href="/stylesheets/font-awesome.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="/stylesheets/login.css">
    <style>
        .Validform_checktip {
            display: block;
            line-height: 25px;
            font-size: 15px;
            color: #fff;
            text-indent: 45px;
        }
        .Validform_wrong {
            color: red;
        }

        .Validform_right {
            color: #91c954;
        }
    </style>
</head>
<body>
<div class="header">
    <div class="container clearfix">
        <div class="logo pull-left">
            <img src="/images/logo.png" />
        </div>
    </div>
</div>
<div class="login_bg">
    <div class="container container1">
        <div style="position:absolute;left:0;top:50%;margin-top:-135px;">
            <img src="/images/bg.png"/>
        </div>
        <div id="LoginArea" class="row">
            <div class="col-lg-12">
                <div class="well bs-component">
                    <div id="LoginForm" class="form-horizontal">
                        <fieldset>
                            <legend style="text-align:center;border-bottom:0px;">登录</legend>
                            <div class="form-group ">
                                <div class="col-lg-12">
                                    <i class="fa fa-user fa-lg"></i>
                                    <input type="text" class="form-control" id="name" placeholder="登录名" required datatype="*" nullmsg="请输入登录名！">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-lg-12">
                                    <i class="fa fa-lock fa-lg"></i>
                                    <input type="password" class="form-control" id="password" placeholder="密码" required datatype="*" nullmsg="请输入密码">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-lg-12">
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox">记住用户名密码
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-lg-12">
                                    <button id="LoginButton" type="button" class="btn btn-success btn-block">登录</button>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="/javascripts/jquery.min.js"></script>
<script src="/javascripts/bootstrap.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="/javascripts/common.js"></script>
<script src="/javascripts/Validform_v5.3.1.js"></script>
<script>
    socket.on('login',function (data) {
        
    })
    $("#LoginForm").Validform({
        datatype: {},
        ajaxPost: true,
        btnSubmit: "#LoginButton",
        tiptype: 3,
        showAllError: false,
        beforeSubmit: function (curform) {
            $.ajax({
                url:host+'/user/login',
                type:'POST',
                dataType:'json',
                xhrFields: {
                    withCredentials: true
                },
                data:{
                    name:$('#name').val().trim(),
                    password:$('#password').val().trim()
                },
                success:function(result){
                    /*socket.emit('login',{
                        userid:result.userId,
                        username:result.userName,
                        nickname:result.nickName
                    })*/
                    if(result.isAdmin){
                        location.href='/user'
                    }else{
                        location.href='/index'
                    }
                },
                error:function(){

                }
            })
        }
    });
</script>
</body>
</html>